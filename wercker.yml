box: golang

build:
  steps:
    - setup-go-workspace

    - script:
        name: go get
        code: |
          go get -v github.com/gohugoio/hugo

    - script:
        name: show version
        code: |
          go version
          go env
          hugo version

    - script:
        name: get submodules
        code: |
          git submodule update --init --recursive

    - script:
        name: setup build dir
        code: |
          git clone https://github.com/kamichidu/kamichidu.github.com public

    - script:
        name: generate site
        code: |
          hugo

deploy:
  steps:
    - script:
        name: git config
        code: |
          git config user.name wercker

    - script:
        name: push site
        code: |
          cd public
          git add .
          git commit -m 'update'
          git push origin master
